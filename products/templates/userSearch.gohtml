<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>GoGreen</title>
    
    {{template "userHeader"}}
    {{template "style"}}
</head>
<body>

    {{template "userNav"}}

    <div class="body">
        <h1>Search Results</h1>
        <br>
        <table width="80%" class="table">
        <tr><td colspan=7>
        <form method="post" action="/search">

            <label for="name">Search Product:</label>    
            <input type="text" name="SearchKey" id="name">
        
            <label for="categories">Categories:</label>
            <select name="CatID" id="categories" required>
            <option value="0" selected>Any category</option>
            
            {{range $index, $element := .Categories}} 
                <option value="{{$element.ID}}"> {{$element.Name}} </option>
            {{end}}
            </select>

            <label for="brands">Brand:</label>
            <select name="BrandID" id="brands" required>
            <option value="0" selected>Any brand</option>

            {{range $index, $element := .Brands}} 
                <option value="{{$element.ID}}"> {{$element.Name}} </option>
            {{end}}
            </select>

            <input type="submit" class="btn btn-secondary btn-sm" name="Search" value="Search">

        </form>
        </td></tr>

        <tr>
            <td><h3><a href="/search?sortby=Name">Product Name</a></h3></td>
            <td><h3>Short Description</h3></td>
            <td><h3><a href="/search?sortby=Price">Price</a></h3></td>
            <td><h3><a href="/search?sortby=Quantity">Quantity</a></h3></td>
            <td><h3>Category</h3></td>
            <td><h3>Brand</h3></td>
            <td><h3>Condition</h3></td>

        </tr>
        {{range .Products}} 
        <tr>
            <td><a href="/{{.ID}}">{{.Name}}</a></td>
            <td>{{.DescShort}}</td>
            <td>{{.Price}}</td>
            <td>{{.Quantity}}</td>
            <td>{{.CategoryName}}</td>
            <td>{{.BrandName}}</td>
            <td>{{.Condition}}</td>

        </tr>
        {{end}}

        </table>

        <form method="post" action="/">
            <input type="submit" value="Back to All Products">
        </form>
    </div>

</body>

{{template "userFooter"}}

</html>